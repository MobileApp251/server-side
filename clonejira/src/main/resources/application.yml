spring:
  application:
    name: clonejira
  
  docker:
    compose:
      enabled: false

  # --- Cấu hình Database (JPA & MySQL) ---
  datasource:
    url: jdbc:mysql://localhost:3306/jira
    username: root
    password: "123456" # Nên để password trong ngoặc kép nếu có ký tự đặc biệt
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect

  # --- Cấu hình API Gateway ---
  cloud:
    gateway:
      routes:
        # Route 1: Chuyển hướng đến chính service Spring này (hoặc service Spring khác)
        # Lưu ý: Nếu Gateway nằm chung code với service backend này, bạn không cần route này 
        # trừ khi bạn muốn gọi vòng lại. Nếu Gateway là app riêng, hãy điền IP của service Spring.
        - id: spring-backend
          uri: http://localhost:8080 # Đổi thành port/ip thật của service Spring đích
          predicates:
            - Host=**:8080
          
        # Route 2: Chuyển hướng đến Service PHP
        - id: php-service
          uri: http://localhost:8081 # Đổi thành port/ip thật của service PHP
          predicates:
            - Host=**:8081
          filters:
            - StripPrefix=1 # Bỏ /api/v1/php trước khi gọi xuống PHP